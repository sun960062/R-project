rm(list=ls())
library(httr)

name = "DoctorKoWJ"
token =   "EAACEdEose0cBAKOezgOIbIBbiisYmRpOwuI55nH4kfitci3bwljckAZAjGx4fezlBJK2KRWdZC5ZCprTbMDr0RCrRZAmJaLrSevZCUPtgKfYobKv6cKRSxO3BbgOKUWQMZBGq19FTCaZA1ZBeZAldkv2pH1QNqO8c8xlEhodI0PqVZCVaZA1slsrmxilcADUC0MZCcoYe9mS8xYfKdJ1EZCEWvv29PzqTVetVDdcZD"

url = paste0("https://graph.facebook.com/v2.12/",
             name,
             "/feed?access_token=",
             token)

res = httr::GET(url)
raw = content(res)

# the 31lab system needs: artTitle,artContent,artDate,artUrl
df <- data.frame("artTitle"=character(0),
                 "artContent"=character(0),
                 "artDate"=character(0),
                 "artUrl"=character(0), stringsAsFactors = FALSE)

while(!is.null(url)){
  if( is.null(raw$posts$data) ){
    data = raw$data  
  }else{
    data = raw$posts$data # page1
  }
  
  data_size = length(data)
  for(i in c(1:data_size)){
    artTitle = "no title"
    created_time = data[[i]]$created_time
    year = strsplit(created_time, '-')[[1]][1]
    month = strsplit(created_time, '-')[[1]][2]
    day = strsplit(strsplit(created_time[1],'-')[[1]][3],'T')[[1]][1]
    hour = strsplit(strsplit(strsplit(created_time[1],'-')[[1]][3],'T')[[1]][2],':')[[1]][1]
    min = strsplit(strsplit(strsplit(created_time[1],'-')[[1]][3],'T')[[1]][2],':')[[1]][2]
    artDate = paste0(year,'/',month,'/',day,' ',hour,':',min)
    artContent = data[[i]]$message
    artContent = gsub("\n","",artContent)
    artContent = gsub("ðŸ˜€|ðŸ˜¬|ðŸ˜|ðŸ˜‚|ðŸ˜ƒ|ðŸ˜„|ðŸ¤£|ðŸ˜…|ðŸ˜†|ðŸ˜‡|ðŸ˜‰|ðŸ˜Š|ðŸ™‚|ðŸ™ƒ|â˜º|ðŸ˜‹|ðŸ˜Œ|ðŸ˜|ðŸ˜˜|ðŸ˜—|ðŸ˜™|ðŸ˜š|ðŸ¤ª|ðŸ˜œ|ðŸ˜|ðŸ˜›|ðŸ¤‘|ðŸ˜Ž|ðŸ¤“|ðŸ§|ðŸ¤ |ðŸ¤—|ðŸ¤¡|ðŸ˜|ðŸ˜¶|ðŸ˜|ðŸ˜‘|ðŸ˜’|ðŸ™„|ðŸ¤¨|ðŸ¤”|ðŸ¤«|ðŸ¤­|ðŸ¤¥|ðŸ˜³|ðŸ˜ž|ðŸ˜Ÿ|ðŸ˜ |ðŸ˜¡|ðŸ¤¬|ðŸ˜”|ðŸ˜•|ðŸ™|â˜¹|ðŸ˜£|ðŸ˜–|ðŸ˜«|ðŸ˜©|ðŸ˜¤|ðŸ˜®|ðŸ˜±|ðŸ˜¨|ðŸ˜°|ðŸ˜¯|ðŸ˜¦|ðŸ˜§|ðŸ˜¢|ðŸ˜¥|ðŸ˜ª|ðŸ¤¤|ðŸ˜“|ðŸ˜­|ðŸ¤©|ðŸ˜µ|ðŸ˜²|ðŸ¤¯|ðŸ¤|ðŸ˜·|ðŸ¤•|ðŸ¤’|ðŸ¤®|ðŸ¤¢|ðŸ¤§|ðŸ˜´|ðŸ’¤|ðŸ˜ˆ|ðŸ‘¿|ðŸ‘¹|ðŸ‘º|ðŸ’©|ðŸ‘»|ðŸ’€|â˜ |ðŸ‘½|ðŸ¤–|ðŸŽƒ|ðŸ˜º|ðŸ˜¸|ðŸ˜¹|ðŸ˜»|ðŸ˜¼|ðŸ˜½|ðŸ™€|ðŸ˜¿|ðŸ˜¾|ðŸ‘|ðŸ¤²|ðŸ™Œ|ðŸ‘|ðŸ™|ðŸ¤|ðŸ‘|ðŸ‘Ž|ðŸ‘Š|âœŠ|ðŸ¤›|ðŸ¤œ|ðŸ¤ž|âœŒ|ðŸ¤˜|ðŸ¤Ÿ|ðŸ‘Œ|ðŸ‘ˆ|ðŸ‘‰|ðŸ‘†|ðŸ‘‡|â˜|âœ‹|ðŸ¤š|ðŸ–|ðŸ––|ðŸ‘‹|ðŸ¤™|ðŸ’ª|ðŸ–•|âœ|ðŸ¤³|ðŸ’…|ðŸ‘„|ðŸ‘…|ðŸ‘‚|ðŸ‘ƒ|ðŸ‘|ðŸ‘€|ðŸ§ |ðŸ‘¤|ðŸ‘¥|ðŸ—£|ðŸ‘¶|ðŸ§’|ðŸ‘¦|ðŸ‘§|ðŸ§‘|ðŸ‘¨|ðŸ§”|ðŸ‘±
â™‚ï¸|ðŸ‘©|ðŸ‘±
â™€ï¸|ðŸ§“|ðŸ‘´|ðŸ‘µ|ðŸ‘²|ðŸ‘³
â™€ï¸|ðŸ‘³
â™‚ï¸|ðŸ§•|ðŸ‘®
â™€ï¸|ðŸ‘®
â™‚ï¸|ðŸ‘©
ðŸš’|ðŸ‘¨
ðŸš’|ðŸ‘·
â™€ï¸|ðŸ‘·
â™‚ï¸|ðŸ‘©
ðŸ­|ðŸ‘¨
ðŸ­|ðŸ‘©
ðŸ”§|ðŸ‘¨
ðŸ”§|ðŸ‘©
ðŸŒ¾|ðŸ‘¨
ðŸŒ¾|ðŸ‘©
ðŸ³|ðŸ‘¨
ðŸ³|ðŸ‘©
ðŸŽ¤|ðŸ‘¨
ðŸŽ¤|ðŸ‘©
ðŸŽ¨|ðŸ‘¨
ðŸŽ¨|ðŸ‘©
ðŸ«|ðŸ‘¨
ðŸ«|ðŸ‘©
ðŸŽ“|ðŸ‘¨
ðŸŽ“|ðŸ‘©
ðŸ’¼|ðŸ‘¨
ðŸ’¼|ðŸ‘©
ðŸ’»|ðŸ‘¨
ðŸ’»|ðŸ‘©
ðŸ”¬|ðŸ‘¨
ðŸ”¬|ðŸ‘©
ðŸš€|ðŸ‘¨
ðŸš€|ðŸ‘©
âš•ï¸|ðŸ‘¨
âš•ï¸|ðŸ‘©
âš–ï¸|ðŸ‘¨
âš–ï¸|ðŸ‘©
âœˆï¸|ðŸ‘¨
âœˆï¸|ðŸ’‚
â™€ï¸|ðŸ’‚
â™‚ï¸|ðŸ•µï¸
â™€ï¸|ðŸ•µï¸
â™‚ï¸|ðŸ¤¶|ðŸŽ…|ðŸ‘¼|ðŸ‘¸|ðŸ¤´|ðŸ‘°|ðŸ¤µ
â™€ï¸|ðŸ¤µ|ðŸ•´ï¸
â™€ï¸|ðŸ•´|ðŸ§™
â™€ï¸|ðŸ§™
â™‚ï¸|ðŸ§
â™€ï¸|ðŸ§
â™‚ï¸|ðŸ§š
â™€ï¸|ðŸ§š
â™‚ï¸|ðŸ§ž
â™€ï¸|ðŸ§ž
â™‚ï¸|ðŸ§œ
â™€ï¸|ðŸ§œ
â™‚ï¸|ðŸ§›
â™€ï¸|ðŸ§›
â™‚ï¸|ðŸ§Ÿ
â™€ï¸|ðŸ§Ÿ
â™‚ï¸|ðŸ™‡
â™€ï¸|ðŸ™‡
â™‚ï¸|ðŸ’
â™€ï¸|ðŸ’
â™‚ï¸|ðŸ™…
â™€ï¸|ðŸ™…
â™‚ï¸|ðŸ™†
â™€ï¸|ðŸ™†
â™‚ï¸|ðŸ¤·
â™€ï¸|ðŸ¤·
â™‚ï¸|ðŸ™‹
â™€ï¸|ðŸ™‹
â™‚ï¸|ðŸ¤¦
â™€ï¸|ðŸ¤¦
â™‚ï¸|ðŸ™Ž
â™€ï¸|ðŸ™Ž
â™‚ï¸|ðŸ™
â™€ï¸|ðŸ™
â™‚ï¸|ðŸ’‡
â™€ï¸|ðŸ’‡
â™‚ï¸|ðŸ’†
â™€ï¸|ðŸ’†
â™‚ï¸|ðŸ¤°|ðŸ¤±|ðŸš¶
â™€ï¸|ðŸš¶
â™‚ï¸|ðŸƒ
â™€ï¸|ðŸƒ
â™‚ï¸|ðŸ’ƒ|ðŸ•º|ðŸ‘¯
â™€ï¸|ðŸ‘¯
â™‚ï¸|ðŸ‘«|ðŸ‘¬|ðŸ‘­|ðŸ’‘|ðŸ‘©
â¤ï¸
ðŸ‘©|ðŸ‘¨
â¤ï¸
ðŸ‘¨|ðŸ’|ðŸ‘©
â¤ï¸
ðŸ’‹
ðŸ‘©|ðŸ‘¨
â¤ï¸
ðŸ’‹
ðŸ‘¨|ðŸ‘ª|ðŸ‘¨
ðŸ‘©
ðŸ‘§|ðŸ‘¨
ðŸ‘©
ðŸ‘§
ðŸ‘¦|ðŸ‘¨
ðŸ‘©
ðŸ‘¦
ðŸ‘¦|ðŸ‘¨
ðŸ‘©
ðŸ‘§
ðŸ‘§|ðŸ‘©
ðŸ‘©
ðŸ‘¦|ðŸ‘©
ðŸ‘©
ðŸ‘§|ðŸ‘©
ðŸ‘©
ðŸ‘§
ðŸ‘¦|ðŸ‘©
ðŸ‘©
ðŸ‘¦
ðŸ‘¦|ðŸ‘©
ðŸ‘©
ðŸ‘§
ðŸ‘§|ðŸ‘¨
ðŸ‘¨
ðŸ‘¦|ðŸ‘¨
ðŸ‘¨
ðŸ‘§|ðŸ‘¨
ðŸ‘¨
ðŸ‘§
ðŸ‘¦|ðŸ‘¨
ðŸ‘¨
ðŸ‘¦
ðŸ‘¦|ðŸ‘¨
ðŸ‘¨
ðŸ‘§
ðŸ‘§|ðŸ‘©
ðŸ‘¦|ðŸ‘©
ðŸ‘§|ðŸ‘©
ðŸ‘§
ðŸ‘¦|ðŸ‘©
ðŸ‘¦
ðŸ‘¦|ðŸ‘©
ðŸ‘§
ðŸ‘§|ðŸ‘¨
ðŸ‘¦|ðŸ‘¨
ðŸ‘§|ðŸ‘¨
ðŸ‘§
ðŸ‘¦|ðŸ‘¨
ðŸ‘¦
ðŸ‘¦|ðŸ‘¨
ðŸ‘§
ðŸ‘§|ðŸ‘š|ðŸ‘•|ðŸ§¥|ðŸ‘–|ðŸ‘”|ðŸ‘—|ðŸ‘™|ðŸ‘˜|ðŸ’„|ðŸ’‹|ðŸ‘£|ðŸ§¦|ðŸ‘ |ðŸ‘¡|ðŸ‘¢|ðŸ‘ž|ðŸ‘Ÿ|ðŸ§¢|ðŸ‘’|ðŸŽ©|ðŸŽ“|ðŸ‘‘|â›‘|ðŸŽ’|ðŸ‘|ðŸ‘›|ðŸ‘œ|ðŸ’¼|ðŸ‘“|ðŸ•¶|ðŸ§£|ðŸ§¤|ðŸ’|ðŸŒ‚|â˜‚","",artContent)
    artContent = gsub("ðŸ¶|ðŸ±|ðŸ­|ðŸ¹|ðŸ°|ðŸ»|ðŸ¼|ðŸ¨|ðŸ¯|ðŸ¦|ðŸ®|ðŸ·|ðŸ½|ðŸ¸|ðŸµ|ðŸ™ˆ|ðŸ™‰|ðŸ™Š|ðŸ’|ðŸ¦|ðŸ”|ðŸ§|ðŸ¦|ðŸ¤|ðŸ£|ðŸ¥|ðŸº|ðŸ¦Š|ðŸ—|ðŸ´|ðŸ¦“|ðŸ¦’|ðŸ¦Œ|ðŸ¦„|ðŸ|ðŸ›|ðŸ¦‹|ðŸŒ|ðŸž|ðŸœ|ðŸ¦—|ðŸ•·|ðŸ•¸|ðŸ¦‚|ðŸ¢|ðŸ|ðŸ¦Ž|ðŸ¦€|ðŸ¦‘|ðŸ™|ðŸ¦|ðŸ |ðŸŸ|ðŸ¡|ðŸ¬|ðŸ¦ˆ|ðŸ³|ðŸ‹|ðŸŠ|ðŸ†|ðŸ…|ðŸƒ|ðŸ‚|ðŸ„|ðŸª|ðŸ«|ðŸ˜|ðŸ¦|ðŸ|ðŸ|ðŸ‘|ðŸŽ|ðŸ–|ðŸ¦‡|ðŸ“|ðŸ¦ƒ|ðŸ•Š|ðŸ¦…|ðŸ¦†|ðŸ¦‰|ðŸ•|ðŸ©|ðŸˆ|ðŸ‡|ðŸ€|ðŸ|ðŸ¿|ðŸ¦”|ðŸ¾|ðŸ‰|ðŸ²|ðŸ¦•|ðŸ¦–|ðŸŒµ|ðŸŽ„|ðŸŒ²|ðŸŒ³|ðŸŒ´|ðŸŒ±|ðŸŒ¿|â˜˜|ðŸ€|ðŸŽ|ðŸŽ‹|ðŸƒ|ðŸ‚|ðŸ|ðŸŒ¾|ðŸŒº|ðŸŒ»|ðŸŒ¹|ðŸ¥€|ðŸŒ·|ðŸŒ¼|ðŸŒ¸|ðŸ’|ðŸ„|ðŸŒ°|ðŸš|ðŸŒŽ|ðŸŒ|ðŸŒ|ðŸŒ•|ðŸŒ–|ðŸŒ—|ðŸŒ˜|ðŸŒ‘|ðŸŒ’|ðŸŒ“|ðŸŒ”|ðŸŒš|ðŸŒ|ðŸŒ›|ðŸŒœ|ðŸŒž|ðŸŒ™|â­|ðŸŒŸ|ðŸ’«|âœ¨|â˜„|â˜€|ðŸŒ¤|â›…|ðŸŒ¥|ðŸŒ¦|â˜|ðŸŒ§|â›ˆ|ðŸŒ©|âš¡|ðŸ”¥|ðŸ’¥|â„|ðŸŒ¨|â˜ƒ|â›„|ðŸŒ¬|ðŸ’¨|ðŸŒª|ðŸŒ«|â˜”|ðŸ’§|ðŸ’¦|ðŸŒŠ","",artContent)
    artContent = gsub("ðŸ|ðŸŽ|ðŸ|ðŸŠ|ðŸ‹|ðŸŒ|ðŸ‰|ðŸ‡|ðŸ“|ðŸˆ|ðŸ’|ðŸ‘|ðŸ|ðŸ¥¥|ðŸ¥|ðŸ…|ðŸ¥‘|ðŸ†|ðŸŒ¶|ðŸ¥’|ðŸ¥¦|ðŸŒ½|ðŸ¥•|ðŸ¥—|ðŸ¥”|ðŸ |ðŸ¥œ|ðŸ¯|ðŸž|ðŸ¥|ðŸ¥–|ðŸ¥¨|ðŸ¥ž|ðŸ§€|ðŸ—|ðŸ–|ðŸ¥©|ðŸ¤|ðŸ¥š|ðŸ³|ðŸ¥“|ðŸ”|ðŸŸ|ðŸŒ­|ðŸ•|ðŸ|ðŸ¥ª|ðŸ¥™|ðŸŒ®|ðŸŒ¯|ðŸœ|ðŸ¥˜|ðŸ²|ðŸ¥«|ðŸ¥|ðŸ£|ðŸ±|ðŸ›|ðŸ™|ðŸš|ðŸ˜|ðŸ¥Ÿ|ðŸ¢|ðŸ¡|ðŸ§|ðŸ¨|ðŸ¦|ðŸ°|ðŸŽ‚|ðŸ¥§|ðŸ®|ðŸ­|ðŸ¬|ðŸ«|ðŸ¿|ðŸ©|ðŸª|ðŸ¥ |â˜•|ðŸµ|ðŸ¥£|ðŸ¼|ðŸ¥¤|ðŸ¥›|ðŸº|ðŸ»|ðŸ·|ðŸ¥‚|ðŸ¥ƒ|ðŸ¸|ðŸ¹|ðŸ¾|ðŸ¶|ðŸ¥„|ðŸ´|ðŸ½|ðŸ¥¢|ðŸ¥¡|âš½|ðŸ€|ðŸˆ|âš¾|ðŸŽ¾|ðŸ|ðŸ‰|ðŸŽ±|ðŸ“|ðŸ¸|ðŸ¥…|ðŸ’|ðŸ‘|ðŸ|ðŸ¥Œ|â›³|ðŸ¹|ðŸŽ£|ðŸ¥Š|ðŸ¥‹|â›¸|ðŸŽ¿|ðŸ›·|â›·|ðŸ‚
ðŸ‹ï¸
|ï¸
                      ðŸ‹ï¸
|ï¸|ðŸ¤º
                      ðŸ¤¼
|ï¸
                      ðŸ¤¼
|ï¸
                      ðŸ¤¸
|ï¸
                      ðŸ¤¸
|ï¸
                      â›¹ï¸
|ï¸
                      â›¹ï¸
|ï¸
                      ðŸ¤¾
|ï¸
                      ðŸ¤¾
|ï¸
                      ðŸ§—
|ï¸
                      ðŸ§—
|ï¸
                      ðŸŒï¸
|ï¸
                      ðŸŒï¸
|ï¸
                      ðŸ§˜
|ï¸
                      ðŸ§˜
|ï¸
                      ðŸ§–
|ï¸
                      ðŸ§–
|ï¸
                      ðŸ„
|ï¸
                      ðŸ„
|ï¸
                      ðŸŠ
|ï¸
                      ðŸŠ
|ï¸
                      ðŸ¤½
|ï¸
                      ðŸ¤½
|ï¸
                      ðŸš£
|ï¸
                      ðŸš£
|ï¸|ðŸ‡
                      ðŸš´
|ï¸
                      ðŸš´
|ï¸
                      ðŸšµ
|ï¸
                      ðŸšµ
|ï¸|ðŸŽ½|ðŸŽ–|ðŸ…|ðŸ¥‡|ðŸ¥ˆ|ðŸ¥‰|ðŸ†|ðŸµ|ðŸŽ—|ðŸŽ«|ðŸŽŸ|ðŸŽª
                      ðŸ¤¹
|ï¸
                      ðŸ¤¹
|ï¸|ðŸŽ­|ðŸŽ¨|ðŸŽ¬|ðŸŽ¤|ðŸŽ§|ðŸŽ¼|ðŸŽ¹|ðŸ¥|ðŸŽ·|ðŸŽº|ðŸŽ¸|ðŸŽ»|ðŸŽ²|ðŸŽ¯|ðŸŽ³|ðŸŽ®|ðŸ‘¾|ðŸŽ°|ðŸš—|ðŸš•|ðŸš™|ðŸšŒ|ðŸšŽ|ðŸŽ|ðŸš“|ðŸš‘|ðŸš’|ðŸš|ðŸšš|ðŸš›|ðŸšœ|ðŸ|ðŸ›µ|ðŸš²|ðŸ›´|ðŸš¨|ðŸš”|ðŸš|ðŸš˜|ðŸš–|ðŸš¡|ðŸš |ðŸšŸ|ðŸšƒ|ðŸš‹|ðŸš|ðŸš„|ðŸš…|ðŸšˆ|ðŸšž|ðŸš‚|ðŸš†|ðŸš‡|ðŸšŠ|ðŸš‰|ðŸš|ðŸ›©|âœˆ|ðŸ›«|ðŸ›¬|ðŸ›¶|â›µ|ðŸ›¥|ðŸš¤|â›´|ðŸ›³|ðŸš€|ðŸ›¸|ðŸ›°|ðŸ’º|âš“|ðŸš§|â›½|ðŸš|ðŸš¦|ðŸš¥|ðŸ›‘|ðŸš¢|ðŸŽ¡|ðŸŽ¢|ðŸŽ |ðŸ—|ðŸŒ|ðŸ—¼|ðŸ­|â›²|ðŸŽ‘|â›°|ðŸ”|ðŸ—»|ðŸŒ‹|ðŸ—¾|ðŸ•|â›º|ðŸž|ðŸ›£|ðŸ›¤|ðŸŒ…|ðŸŒ„|ðŸœ|ðŸ–|ðŸ|ðŸŒ‡|ðŸŒ†|ðŸ™|ðŸŒƒ|ðŸŒ‰|ðŸŒŒ|ðŸŒ |ðŸŽ‡|ðŸŽ†|ðŸŒˆ|ðŸ˜|ðŸ°|ðŸ¯|ðŸŸ|ðŸ—½|ðŸ |ðŸ¡|ðŸš|ðŸ¢|ðŸ¬|ðŸ£|ðŸ¤|ðŸ¥|ðŸ¦|ðŸ¨|ðŸª|ðŸ«|ðŸ©|ðŸ’’|ðŸ›|â›ª|ðŸ•Œ|ðŸ•|ðŸ•‹|â›©","",artContent)
    
    artContent = gsub("âŒš|ðŸ“±|ðŸ“²|ðŸ’»|âŒ¨|ðŸ–¥|ðŸ–¨|ðŸ–±|ðŸ–²|ðŸ•¹|ðŸ—œ|ðŸ’½|ðŸ’¾|ðŸ’¿|ðŸ“€|ðŸ“¼|ðŸ“·|ðŸ“¸|ðŸ“¹|ðŸŽ¥|ðŸ“½|ðŸŽž|ðŸ“ž|â˜Ž|ðŸ“Ÿ|ðŸ“ |ðŸ“º|ðŸ“»|ðŸŽ™|ðŸŽš|ðŸŽ›|â±|â²|â°|ðŸ•°|â³|âŒ›|ðŸ“¡|ðŸ”‹|ðŸ”Œ|ðŸ’¡|ðŸ”¦|ðŸ•¯|ðŸ—‘|ðŸ›¢|ðŸ›’|ðŸ’¸|ðŸ’µ|ðŸ’´|ðŸ’¶|ðŸ’·|ðŸ’°|ðŸ’³|ðŸ’Ž|âš–|ðŸ”§|ðŸ”¨|âš’|ðŸ› |â›|ðŸ”©|âš™|â›“|ðŸ”«|ðŸ’£|ðŸ”ª|ðŸ—¡|âš”|ðŸ›¡|ðŸš¬|âš°|âš±|ðŸº|ðŸ”®|ðŸ“¿|ðŸ’ˆ|âš—|ðŸ”­|ðŸ”¬|ðŸ•³|ðŸ’Š|ðŸ’‰|ðŸŒ¡|ðŸ·|ðŸ”–|ðŸš½|ðŸš¿|ðŸ›|ðŸ›€|ðŸ”‘|ðŸ—|ðŸ›‹|ðŸ›Œ|ðŸ›|ðŸšª|ðŸ›Ž|ðŸ–¼|ðŸ—º|â›±|ðŸ—¿|ðŸ›|ðŸŽˆ|ðŸŽ|ðŸŽ€|ðŸŽ|ðŸŽŠ|ðŸŽ‰|ðŸŽŽ|ðŸŽ|ðŸ®|âœ‰|ðŸ“©|ðŸ“¨|ðŸ“§|ðŸ’Œ|ðŸ“®|ðŸ“ª|ðŸ“«|ðŸ“¬|ðŸ“­|ðŸ“¦|ðŸ“¯|ðŸ“¥|ðŸ“¤|ðŸ“œ|ðŸ“ƒ|ðŸ“‘|ðŸ“Š|ðŸ“ˆ|ðŸ“‰|ðŸ“„|ðŸ“…|ðŸ“†|ðŸ—“|ðŸ“‡|ðŸ—ƒ|ðŸ—³|ðŸ—„|ðŸ“‹|ðŸ—’|ðŸ“|ðŸ“‚|ðŸ—‚|ðŸ—ž|ðŸ“°|ðŸ““|ðŸ“•|ðŸ“—|ðŸ“˜|ðŸ“™|ðŸ“”|ðŸ“’|ðŸ“š|ðŸ“–|ðŸ”—|ðŸ“Ž|ðŸ–‡|âœ‚|ðŸ“|ðŸ“|ðŸ“Œ|ðŸ“|ðŸ”|ðŸ”’|ðŸ”“|ðŸ”|ðŸ–Š|ðŸ–‹|âœ’|ðŸ“|âœ|ðŸ–|ðŸ–Œ|ðŸ”|ðŸ”Ž","",artContent)
    artContent = gsub("â¤|ðŸ§¡|ðŸ’›|ðŸ’š|ðŸ’™|ðŸ’œ|ðŸ–¤|ðŸ’”|â£|ðŸ’•|ðŸ’ž|ðŸ’“|ðŸ’—|ðŸ’–|ðŸ’˜|ðŸ’|ðŸ’Ÿ|â˜®|âœ|â˜ª|ðŸ•‰|â˜¸|âœ¡|ðŸ”¯|ðŸ•Ž|â˜¯|â˜¦|ðŸ›|â›Ž|â™ˆ|â™‰|â™Š|â™‹|â™Œ|â™|â™Ž|â™|â™|â™‘|â™’|â™“|ðŸ†”|âš›|âš•|â˜¢|â˜£|ðŸ“´|ðŸ“³|ðŸˆ¶|ðŸˆš|ðŸˆ¸|ðŸˆº|ðŸˆ·|âœ´|ðŸ†š|ðŸ‰‘|ðŸ’®|ðŸ‰|ãŠ™|ãŠ—|ðŸˆ´|ðŸˆµ|ðŸˆ¹|ðŸˆ²|ðŸ…°|ðŸ…±|ðŸ†Ž|ðŸ†‘|ðŸ…¾|ðŸ†˜|â›”|ðŸ“›|ðŸš«|âŒ|â­•|ðŸ’¢|â™¨|ðŸš·|ðŸš¯|ðŸš³|ðŸš±|ðŸ”ž|ðŸ“µ|ðŸš­|â—|â•|â“|â”|â€¼|â‰|ðŸ’¯|ðŸ”…|ðŸ”†|ðŸ”±|âšœ|ã€½|âš |ðŸš¸|ðŸ”°|â™»|ðŸˆ¯|ðŸ’¹|â‡|âœ³|âŽ|âœ…|ðŸ’ |ðŸŒ€|âž¿|ðŸŒ|â“‚|ðŸ§|ðŸš¾|â™¿|ðŸ…¿|ðŸˆ³|ðŸˆ‚|ðŸ›‚|ðŸ›ƒ|ðŸ›„|ðŸ›…|ðŸš°|ðŸš¹|â™‚|ðŸšº|â™€|ðŸš¼|ðŸš»|ðŸš®|ðŸŽ¦|ðŸ“¶|ðŸˆ|ðŸ†–|ðŸ†—|ðŸ†™|ðŸ†’|ðŸ†•|ðŸ†“|0âƒ£|1âƒ£|2âƒ£|3âƒ£|4âƒ£|5âƒ£|6âƒ£|7âƒ£|8âƒ£|9âƒ£|ðŸ”Ÿ|ðŸ”¢|â–¶|â¸|â¯|â¹|âº|â|â­|â®|â©|âª|ðŸ”€|ðŸ”|ðŸ”‚|â—€|ðŸ”¼|ðŸ”½|â«|â¬|âž¡|â¬…|â¬†|â¬‡|â†—|â†˜|â†™|â†–|â†•|â†”|ðŸ”„|â†ª|â†©|ðŸ”ƒ|â¤´|â¤µ|#âƒ£|*âƒ£|â„¹|ðŸ”¤|ðŸ”¡|ðŸ” |ðŸ”£|ðŸŽµ|ðŸŽ¶|ã€°|âž°|âœ”|âž•|âž–|âž—|âœ–|ðŸ’²|ðŸ’±|ðŸ”š|ðŸ”™|ðŸ”›|ðŸ”|ðŸ”œ|â˜‘|ðŸ”˜|âšª|âš«|ðŸ”´|ðŸ”µ|ðŸ”¸|ðŸ”¹|ðŸ”¶|ðŸ”·|ðŸ”º|â–ª|â–«|â¬›|â¬œ|ðŸ”»|â—¼|â—»|â—¾|â—½|ðŸ”²|ðŸ”³|ðŸ”ˆ|ðŸ”‰|ðŸ”Š|ðŸ”‡|ðŸ“£|ðŸ“¢|ðŸ””|ðŸ”•|ðŸƒ|ðŸ€„|â™ |â™£|â™¥|â™¦|ðŸŽ´|ðŸ‘
ðŸ—¨|ðŸ—¨|ðŸ’­|ðŸ—¯|ðŸ’¬|ðŸ•|ðŸ•‘|ðŸ•’|ðŸ•“|ðŸ•”|ðŸ••|ðŸ•–|ðŸ•—|ðŸ•˜|ðŸ•™|ðŸ•š|ðŸ•›|ðŸ•œ|ðŸ•|ðŸ•ž|ðŸ•Ÿ|ðŸ• |ðŸ•¡|ðŸ•¢|ðŸ•£|ðŸ•¤|ðŸ•¥|ðŸ•¦|ðŸ•§","",artContent)
    
    
    post_id = data[[i]]$id
    
    # store post_id into artUrl column
    tryCatch({
      de <- list(artTitle=artTitle,
                 artContent=artContent,
                 artDate=artDate,
                 artUrl=post_id)
      df = rbind(df,de, stringsAsFactors=FALSE)
    }, warning = function(war) {
      print(paste("MY_WARNING:  ",war))
    }, error = function(err) {
      print(paste("MY_ERROR:  ",err))
      artContent = ""
      de <- list(artTitle=artTitle,
                 artContent=artContent,
                 artDate=artDate,
                 artUrl=post_id)
      df = rbind(df,de, stringsAsFactors=FALSE)
    })
    print(de)
  }
  
  url = paste0(raw$paging$`next`,
               raw$posts$paging$`next`)
  res = httr::GET(url)
  raw = content(res)
}

# write CSV in R
filename = paste0("./",name,".csv")

fileConn<-file(filename)
writeLines(c("artTitle,artContent,artDate,artUrl"), fileConn)
close(fileConn)
write.table(df, append = TRUE, file = filename, quote = FALSE, row.names=FALSE, na="",col.names=FALSE, sep=",\",")

